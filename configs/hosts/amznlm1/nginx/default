server {
  listen 80;

  root /srv/api/ui;

  index index.html index.htm index.nginx-debian.html;

  server_name amznlm1.1aauto.inc;

  location /api {
    proxy_pass http://localhost:3001;
  }

  location /schemas {
    proxy_pass http://localhost:3001;
  }

  location /auth {
    proxy_pass http://localhost:3001;
  }

  location /registry {
    root   /srv/api/ui;
    index  index.html index.htm;
    try_files $uri $uri/ /index.html;
  }

  location /bulktools {
    root   /srv/api/ui;
    index  index.html index.htm;
    try_files $uri $uri/ /index.html;
  }

  location / {
    try_files $uri $uri/ =404;
  }
}

server {
  listen 80;

  root /srv/api/ui;

  index index.html index.htm index.nginx-debian.html;

  server_name amznlm1-qa.1aauto.inc;

  location /api {
    proxy_pass http://localhost:3002;
  }

  location /schemas {
    proxy_pass http://localhost:3002;
  }

  location /auth {
    proxy_pass http://localhost:3002;
  }

  location /registry {
    root   /srv/api/ui;
    index  index.html index.htm;
    try_files $uri $uri/ /index.html;
  }

  location /bulktools {
    root   /srv/api/ui;
    index  index.html index.htm;
    try_files $uri $uri/ /index.html;
  }

  location / {
    try_files $uri $uri/ =404;
  }
}